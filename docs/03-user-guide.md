# 사용자 가이드

AI Shorts Generator의 모든 기능을 상세하게 설명합니다.

---

## 목차
- [UI 구성](#ui-구성)
- [영상 생성 과정](#영상-생성-과정)
- [트리 시각화](#트리-시각화)
- [테스트 모드](#테스트-모드)
- [생성된 파일 관리](#생성된-파일-관리)

---

## UI 구성

### 좌측 패널: 입력 및 컨트롤

#### 1. OpenAI API Key
- OpenAI API 키 입력
- 브라우저에 자동 저장 (LocalStorage)
- 매번 입력할 필요 없음

#### 2. 콘텐츠 주제
- 영상으로 만들고 싶은 텍스트 입력
- 200-1000자 권장
- 명확하고 구체적인 주제가 좋은 결과 생성

#### 3. 테스트 모드
- 토글 스위치로 ON/OFF
- ON: 2개 장면만 생성 (빠른 테스트)
- OFF: 전체 장면 생성 (8-12개)

#### 4. 장면 수
- 대기 중: "대기 중" 표시
- 실행 중: "실행 중 (N개 장면)" 표시
- 완료 후: 최종 장면 수 표시

#### 5. 영상 생성 시작 버튼
- 클릭하여 생성 시작
- 실행 중에는 비활성화

#### 6. 상태 표시
- **상태 텍스트**: 현재 진행 단계
- **상태 메시지**: 상세 정보
- **진행률 바**: 0-100% 진행률
- **실행 ID**: 고유 실행 식별자

#### 7. 개발자 설정 버튼 (⚙️)
- 좌측 하단 위치
- 클릭하여 개발자 설정 열기
- 비밀번호: `ai@shorts`

---

### 우측 패널: 트리 시각화

#### 실시간 트리 구조 표시
- 모든 노드의 상태를 실시간으로 시각화
- 노드 간 연결 관계 확인
- 드래그하여 캔버스 이동 가능

---

## 영상 생성 과정

### 1단계: 대본 생성 (1층)

**노드**: [1층] Shorts 대본 생성

**처리**:
- GPT가 입력 텍스트를 분석
- 8-12개 장면으로 자동 분할
- 각 장면당 한 문장 대본 생성

**출력 예시**:
```
장면1: "오늘은 AI의 발전에 대해 알아볼게요."
장면2: "인공지능은 이미 우리 생활 곳곳에 사용되고 있어요."
장면3: "의료 분야에서는 질병 진단의 정확도가 크게 향상되었죠."
...
```

**소요 시간**: 약 30초

---

### 2단계: 이미지 컨셉 생성 (2층)

**노드**: [2층] 장면N 자막&이미지

**처리** (각 장면마다 병렬 처리):
- 1층의 각 장면 대본을 분석
- 화면에 표시할 자막 텍스트 생성 (10자 이내)
- DALL-E용 영문 이미지 프롬프트 생성

**출력 예시**:
```
자막: AI 발전
===IMAGE===
Hand-drawn illustration style, colored pencil sketch on beige paper,
9:16 vertical portrait composition, centered, a simple robot with AI brain,
soft pastel colors, gentle shading, simple and clean, educational drawing,
white margins
```

**소요 시간**: 약 30초 (병렬 처리)

---

### 3단계: 이미지 및 음성 생성 (3층)

#### 이미지 생성
**노드**: [3층] 장면N 이미지

**처리**:
- DALL-E 3로 이미지 생성
- 2층의 이미지 프롬프트 사용
- 1024x1792 해상도 (9:16 비율)

**소요 시간**: 장면당 약 30-60초 (병렬 처리)

#### 음성 생성
**노드**: [3층] 장면N 음성 (TTS)

**처리**:
- OpenAI TTS-1로 음성 합성
- 2층의 자막 텍스트를 음성으로 변환
- MP3 형식으로 저장

**소요 시간**: 장면당 약 5-10초 (병렬 처리)

---

### 4단계: 영상 합성

**처리**:
- FFmpeg로 모든 장면 합성
- 이미지 + 음성 + 자막 결합
- 9:16 Shorts 포맷 (1080x1920)
- 장면 전환 효과 (fade)

**출력**:
- MP4 파일
- 30-60초 길이
- 다운로드 가능

**소요 시간**: 약 10-30초

---

## 트리 시각화

### 노드 상태

**색상 코드**:
- 🟦 **회색** (pending): 대기 중
- 🟨 **노란색** (running): 실행 중
- 🟩 **초록색** (completed): 완료
- 🟥 **빨간색** (failed): 실패

### 노드 클릭

노드를 클릭하면 우측에 상세 정보 패널이 열립니다:

#### 기본 정보
- **노드 이름**: 층과 역할
- **상태**: 현재 상태 (pending/running/completed/failed)
- **모델**: 사용 중인 AI 모델

#### 프롬프트
- **Developer Message**: 시스템 메시지 (AI의 역할)
- **User Prompt Template**: 사용자 프롬프트 템플릿

#### 출력 결과
- **입력 내용**: 노드가 받은 입력
- **출력 배열**: 노드가 생성한 출력 (여러 개일 수 있음)
- **이미지**: 생성된 이미지 미리보기 (이미지 노드)
- **오디오**: 생성된 음성 플레이어 (TTS 노드)

#### 플레이스홀더 도움말
- 사용 가능한 변수 설명
- 현재 노드에서의 동작 방식

---

### 캔버스 조작

#### 드래그
- 캔버스를 클릭한 채로 드래그하여 이동
- 넓은 트리를 탐색할 때 유용

#### 사이드바 크기 조절
- 우측 사이드바의 왼쪽 가장자리를 드래그
- 더 많은 정보를 보고 싶을 때 크기 조절

---

## 테스트 모드

### 사용 시기
- 처음 사용할 때
- 프롬프트 설정을 테스트할 때
- 빠른 결과를 원할 때
- API 비용을 절감하고 싶을 때

### 동작 방식
1. AI가 대본을 생성 (예: 10개 장면)
2. 테스트 모드에서는 앞부분 2개만 처리
3. 나머지 8개는 건너뜀

### 비용 비교

**테스트 모드 (2개 장면)**:
- DALL-E: 2장 × $0.04 = $0.08
- TTS: 약 50자 × 2 = $0.001
- GPT: 약 $0.01
- **합계**: 약 $0.09

**일반 모드 (10개 장면)**:
- DALL-E: 10장 × $0.04 = $0.40
- TTS: 약 50자 × 10 = $0.008
- GPT: 약 $0.02
- **합계**: 약 $0.43

💡 **80% 이상 비용 절감!**

---

## 생성된 파일 관리

### 파일 저장 위치

```
/workspaces/my_server/generated/
├── images/                    # DALL-E 이미지
│   └── exec_xxx_scene1.png
├── audio/                     # TTS 음성
│   └── exec_xxx_scene1.mp3
└── videos/                    # 최종 영상
    └── exec_xxx_final.mp4
```

### 파일 명명 규칙
- `exec_[실행ID]_[장면번호].[확장자]`
- 예: `exec_1234567890_abc123_scene1.png`

### 자동 정리
- **24시간 후** 자동 삭제
- 서버 시작 시 오래된 파일 정리
- 6시간마다 자동 정리

### 수동 다운로드
- 결과 모달에서 영상 다운로드 가능
- 브라우저의 기본 다운로드 폴더에 저장

---

## 팁

### 💰 비용 절감
1. 테스트 모드 활성화
2. 개발자 설정에서 저렴한 모델 사용
   - gpt-3.5-turbo (GPT)
   - dall-e-2 (이미지)
3. 테스트 장면 수를 1개로 설정

### ⚡ 속도 향상
1. 테스트 모드 활성화
2. 짧은 주제 입력 (적은 장면 생성)

### 🎯 품질 향상
1. 명확하고 구체적인 주제 입력
2. 개발자 설정에서 고급 모델 사용
   - gpt-4o (GPT)
   - dall-e-3 (이미지)
3. 이미지 품질을 'hd'로 설정

---

## 다음 단계

- [개발자 가이드](./04-developer-guide.md) - 프롬프트 및 설정 커스터마이징
- [API 레퍼런스](./05-api-reference.md) - API 엔드포인트 상세 설명
