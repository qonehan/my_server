# 개발자 가이드

AI Shorts Generator의 프롬프트, 모델, 파라미터를 커스터마이징하는 방법을 설명합니다.

---

## 목차
- [개발자 설정 접근](#개발자-설정-접근)
- [설정 탭 구성](#설정-탭-구성)
- [플레이스홀더 시스템](#플레이스홀더-시스템)
- [커스터마이징 예시](#커스터마이징-예시)
- [모델별 파라미터](#모델별-파라미터)

---

## 개발자 설정 접근

### 설정 열기

1. 좌측 사이드바 하단의 **⚙️ 버튼** 클릭
2. 비밀번호 입력: `ai@shorts`
3. 개발자 설정 모달 열림

### 비밀번호 변경

비밀번호는 `/config/dev-password.md` 파일에 저장되어 있습니다.

---

## 설정 탭 구성

개발자 설정은 4개의 탭으로 구성:

### 1. 기본 설정

#### 테스트 모드 최대 장면 수
- **기본값**: 2
- **범위**: 1-10
- **설명**: 테스트 모드 활성화 시 실제로 처리할 최대 장면 수

**동작 예시**:
- AI가 10개 장면 대본 생성
- 테스트 모드 최대 장면 수: 2
- → 처음 2개 장면만 이미지/음성 생성
- → 나머지 8개 장면은 건너뜀

---

### 2. 1층: Shorts 대본 생성

GPT 모델을 사용하여 사용자 입력을 여러 장면으로 분할합니다.

#### 설정 항목

**모델**:
- 기본값: `gpt-4o`
- 선택 가능: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-3.5-turbo

**시스템 메시지**:
- AI의 역할과 행동 방식 정의
- 예: "너는 교육 컨텐츠 전문 대본 작가야..."

**프롬프트 템플릿**:
- 사용 가능한 플레이스홀더: `{input}`
- AI에게 전달할 구체적인 지시사항

**기본 프롬프트**:
```
아래 글을 읽고 30-60초 분량의 교육용 Shorts 영상 대본을 작성해줘.

입력 내용:
{input}

대본 작성 규칙:
1. 총 8-12개 장면으로 구성
2. 각 장면당 한 문장만 작성
3. 각 장면은 "---"로 구분
4. 간결하고 핵심만 전달
```

---

### 3. 2층: 자막 & 이미지 컨셉

각 장면별로 자막 텍스트와 DALL-E 이미지 프롬프트를 생성합니다.

#### 설정 항목

**모델**:
- 기본값: `gpt-4o`
- 선택 가능: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-3.5-turbo

**시스템 메시지**:
- 예: "너는 교육 영상 일러스트 기획 전문가야..."

**프롬프트 템플릿**:
- 사용 가능한 플레이스홀더: `{parent}`
- 1층 대본을 받아 자막 + 이미지 프롬프트로 변환

**기본 프롬프트**:
```
다음 장면의 대본을 분석하고, 손그림 일러스트로 표현할 이미지 프롬프트를 작성해줘:

장면 대본:
{parent}

출력 형식:
첫 번째 줄: 화면에 표시할 핵심 키워드 자막 (10자 이내)
===IMAGE===
두 번째 부분: DALL-E 이미지 프롬프트 (영문)
```

**출력 예시**:
```
AI 발전
===IMAGE===
Hand-drawn illustration style, colored pencil sketch on beige paper,
9:16 vertical portrait composition, centered, a simple robot with AI brain,
soft pastel colors, gentle shading, simple and clean, educational drawing,
white margins
```

---

### 4. 3층: 이미지 생성

DALL-E를 사용하여 실제 이미지를 생성합니다.

#### 설정 항목

**모델**:
- 기본값: `dall-e-3`
- 선택 가능: dall-e-3, dall-e-2, gpt-image-1, gpt-image-1-mini

**이미지 크기**:
- 기본값: `1024x1792` (세로, 9:16 비율)
- DALL-E 3 선택 가능:
  - 1024x1792 (세로)
  - 1792x1024 (가로)
  - 1024x1024 (정사각형)

**품질** (DALL-E 3, gpt-image 모델만):
- 기본값: `standard`
- 선택 가능: standard, hd

**스타일** (DALL-E 3만):
- 기본값: `natural`
- 선택 가능: natural, vivid

---

## 플레이스홀더 시스템

프롬프트 템플릿에서 동적 값을 삽입하기 위한 변수 시스템입니다.

### 사용 가능한 플레이스홀더

#### `{input}` - 사용자 입력값
- **사용 위치**: 1층 노드만
- **설명**: 사용자가 UI에서 입력한 콘텐츠 주제
- **예시**:
  ```
  프롬프트: "다음 주제로 대본 작성: {input}"
  치환 후: "다음 주제로 대본 작성: AI가 바꾸는 미래"
  ```

#### `{parent}` - 부모 노드 출력
- **사용 위치**: 2층, 3층 노드
- **설명**: 부모 노드의 특정 인덱스 출력값
- **동작 방식**: `parentArrayIndex` 설정에 따라 자동 매칭

**2층 노드 (자막&이미지)**:
```
프롬프트: "다음 대본 분석: {parent}"
치환 후: "다음 대본 분석: AI의 발전에 대해 알아볼게요"
```

**3층 이미지 노드** (`parentArrayIndex: 1`):
```
2층 출력: ["AI 발전", "A robot illustration..."]
{parent} → "A robot illustration..." (인덱스 1)
```

**3층 TTS 노드** (`parentArrayIndex: 0`):
```
2층 출력: ["AI 발전", "A robot illustration..."]
{parent} → "AI 발전" (인덱스 0)
```

#### `{parent[N]}` - 부모의 특정 인덱스
- **설명**: 부모 출력 배열의 N번째 값을 명시적으로 지정
- **예시**:
  ```
  프롬프트: "자막: {parent[0]}, 이미지: {parent[1]}"
  치환 후: "자막: AI 기술, 이미지: A modern robot..."
  ```

#### `{sceneNum}` - 현재 장면 번호
- **설명**: 동적으로 생성되는 장면의 순서 (1, 2, 3...)
- **사용 예시**:
  ```
  노드 이름: "[2층] 장면{sceneNum} 자막&이미지"
  → "[2층] 장면1 자막&이미지"
  → "[2층] 장면2 자막&이미지"
  ```

#### `{root}` - 최초 사용자 입력
- **설명**: 트리 실행 시 맨 처음 입력된 값
- **차이점**:
  - `{input}`: 각 노드의 직접 입력
  - `{root}`: 전체 트리의 최초 입력 (항상 동일)
- **예시**:
  ```
  프롬프트: "원본 주제: {root}, 현재 장면: {parent}"
  치환 후: "원본 주제: AI의 미래, 현재 장면: 인공지능은..."
  ```

### 플레이스홀더 사용 규칙

1. **대소문자 구분**: 정확히 `{input}`, `{parent}` 형식으로 사용
2. **공백 금지**: `{ parent }` ❌, `{parent}` ✅
3. **존재하지 않는 플레이스홀더**: 치환되지 않고 그대로 출력
4. **배열 인덱스 범위**: `{parent[N]}`에서 N이 범위 초과 시 오류

---

## 커스터마이징 예시

### 예시 1: 더 긴 대본 생성

**목표**: 8-12개 대신 15개 장면 생성

**방법**:
1. **1층: Shorts 대본 생성** 탭 이동
2. **프롬프트 템플릿** 수정:
   ```
   아래 글을 읽고 교육용 Shorts 영상 대본을 작성해줘.

   입력 내용:
   {input}

   대본 작성 규칙:
   1. 총 15개 장면으로 구성  ← 수정
   2. 각 장면당 한 문장만 작성
   3. "---"로 구분
   ```
3. **저장** 클릭

---

### 예시 2: 비용 절감 (저렴한 모델)

**목표**: GPT 비용 절감

**방법**:
1. **1층** 탭: 모델을 `gpt-3.5-turbo`로 변경
2. **2층** 탭: 모델을 `gpt-3.5-turbo`로 변경
3. **3층** 탭: 모델을 `dall-e-2`로 변경
4. **저장** 클릭

**비용 비교**:
- 기본 (gpt-4o + dall-e-3): ~$0.50
- 절약 (gpt-3.5-turbo + dall-e-2): ~$0.15

---

### 예시 3: 고품질 이미지

**목표**: 더 선명하고 생동감 있는 이미지

**방법**:
1. **3층: 이미지 생성** 탭 이동
2. **모델**: `dall-e-3` 유지
3. **품질**: `hd`로 변경
4. **스타일**: `vivid`로 변경
5. **저장** 클릭

---

### 예시 4: 정사각형 이미지 (인스타그램 피드)

**목표**: 9:16 대신 1:1 비율

**방법**:
1. **3층: 이미지 생성** 탭 이동
2. **이미지 크기**: `1024x1024`로 변경
3. **저장** 클릭

💡 **주의**: 영상 합성 시 비율이 달라질 수 있음

---

### 예시 5: 다른 스타일의 이미지

**목표**: 손그림 대신 사실적인 사진 스타일

**방법**:
1. **2층: 자막 & 이미지 컨셉** 탭 이동
2. **프롬프트 템플릿** 수정:
   ```
   다음 장면의 대본을 분석하고, 사실적인 사진 스타일 이미지 프롬프트를 작성해줘:

   장면 대본:
   {parent}

   출력 형식:
   첫 번째 줄: 화면에 표시할 핵심 키워드 자막 (10자 이내)
   ===IMAGE===
   두 번째 부분: DALL-E 이미지 프롬프트 (영문, 사실적인 사진 스타일)

   이미지 스타일 가이드:
   - Photorealistic, high-quality photograph
   - Professional camera, good lighting
   - 9:16 vertical portrait composition
   - Centered subject, clean background
   ```
3. **저장** 클릭

---

## 모델별 파라미터

### GPT 모델

#### gpt-4o (권장)
- **용도**: 최고 품질 대본 및 기획
- **비용**: $$$ (가장 비쌈)
- **속도**: 빠름
- **추천**: 품질이 중요한 경우

#### gpt-4o-mini
- **용도**: 빠른 속도, 합리적 품질
- **비용**: $$
- **속도**: 매우 빠름
- **추천**: 균형잡힌 선택

#### gpt-4-turbo
- **용도**: 고품질 대본
- **비용**: $$$
- **속도**: 보통
- **추천**: 복잡한 주제

#### gpt-3.5-turbo
- **용도**: 비용 절감
- **비용**: $ (가장 저렴)
- **속도**: 매우 빠름
- **추천**: 테스트 또는 단순 주제

---

### 이미지 생성 모델

#### DALL-E 3 (권장)
- **지원 크기**: 1024x1024, 1024x1792, 1792x1024
- **품질 옵션**: standard, hd
- **스타일 옵션**: natural, vivid
- **비용**: $0.04 (standard), $0.08 (hd)
- **추천**: 최고 품질

#### DALL-E 2
- **지원 크기**: 256x256, 512x512, 1024x1024
- **품질 옵션**: ❌
- **스타일 옵션**: ❌
- **비용**: $0.02
- **추천**: 비용 절감

#### gpt-image-1
- **지원 크기**: 1024x1024, 1024x1536, 1536x1024, auto
- **품질 옵션**: low, medium, high, auto
- **스타일 옵션**: ❌
- **비용**: 변동
- **추천**: 실험용

#### gpt-image-1-mini
- **지원 크기**: 1024x1024, 1024x1536, 1536x1024, auto
- **품질 옵션**: low, medium, high, auto
- **스타일 옵션**: ❌
- **비용**: gpt-image-1보다 저렴
- **추천**: 비용 절감

---

## 설정 저장 및 관리

### 저장 위치

설정은 **서버 파일**에 저장:
- 파일 경로: `/config/dev-settings.json`
- 서버 재시작 후에도 유지

### 저장 방법

1. 각 탭에서 원하는 설정 수정
2. 하단의 **저장** 버튼 클릭
3. 성공 메시지 확인

### 초기화

**초기화** 버튼 클릭 시 모든 설정이 기본값으로 복원됩니다.

---

## 주의사항

### 1. 프롬프트 변수 제한
- 1층: `{input}`만 사용 가능
- 2층, 3층: `{parent}` 사용 가능

### 2. 모델 변경 시 비용
모델에 따라 API 사용 비용 차이:
- GPT: gpt-4o > gpt-4-turbo > gpt-3.5-turbo
- 이미지: dall-e-3 (hd) > dall-e-3 > dall-e-2

### 3. 테스트 모드 활용
전체 설정 테스트 시 테스트 모드를 활성화하여 비용 절감

### 4. 파라미터 호환성
각 모델마다 지원하는 파라미터가 다름:
- DALL-E 2는 품질/스타일 옵션 없음
- gpt-image 모델은 스타일 옵션 없음

---

## 다음 단계

- [API 레퍼런스](./05-api-reference.md) - API 엔드포인트 상세 설명
- [기술 상세](./06-technical-details.md) - 내부 구조 및 라이브러리
