# AI Shorts Generator 개요

> 텍스트 입력만으로 자동으로 Shorts 형태의 영상을 생성하는 AI 기반 플랫폼

OpenAI API(GPT, DALL-E, TTS)를 트리 구조로 연결하여 자막과 음성이 포함된 완성된 영상을 자동으로 생성합니다.

---

## 핵심 기능

### 자동 영상 생성 파이프라인
- **자동 장면 분할**: GPT가 입력 텍스트를 8-12개 장면으로 분석
- **자막 & 이미지 생성**: 각 장면별 자막과 DALL-E 이미지 자동 생성
- **음성 합성**: OpenAI TTS로 자연스러운 음성 생성
- **영상 합성**: FFmpeg로 이미지 + 음성 + 자막을 9:16 Shorts 영상으로 합성

### 실시간 모니터링
- 웹 브라우저에서 진행 상황 실시간 확인
- 트리 시각화로 각 단계 상태 모니터링
- 노드 클릭으로 상세 정보 확인

### 개발자 커스터마이징
- 각 층별 모델, 프롬프트, 파라미터 변경 가능
- 설정을 서버 파일에 저장 (재시작 후에도 유지)
- 플레이스홀더를 통한 동적 프롬프트 생성

---

## 작동 원리

```
사용자 입력 텍스트
        ↓
[1층] GPT - 콘텐츠 분석 및 장면 분할
  출력: ["장면1 대본", "장면2 대본", "장면3 대본", ...]
        ↓
[2층] GPT - 각 장면별 자막 & 이미지 컨셉 기획 (병렬 처리)
  출력: ["자막 텍스트", "DALL-E 프롬프트"]
        ↓
[3층] DALL-E + TTS - 이미지 및 음성 생성 (병렬 처리)
  출력: 이미지 파일 (1024x1792) + MP3 오디오 파일
        ↓
[영상 합성] FFmpeg - 이미지 + 오디오 + 자막
        ↓
최종 Shorts 영상 (1080x1920, 9:16, MP4)
```

---

## 프로젝트 구조

```
my_server/
├── tree-server.js              # Express.js API 서버
│
├── tree-engine/                # API Tree 실행 엔진
│   ├── TreeNode.js            # GPT 노드 클래스
│   ├── TreeExecutor.js        # 트리 순회 및 실행 엔진
│   ├── DalleNode.js           # DALL-E 이미지 생성 노드
│   └── TTSNode.js             # OpenAI TTS 음성 생성 노드
│
├── video-engine/              # 영상 합성
│   └── VideoComposer.js       # FFmpeg 기반 영상 합성
│
├── utils/                     # 유틸리티
│   └── FileManager.js         # 파일 저장 및 자동 정리
│
├── public/                    # 프론트엔드
│   ├── index.html            # 메인 UI
│   ├── style.css             # 스타일시트
│   └── app.js                # 프론트엔드 로직
│
├── config/                    # 설정 파일
│   ├── dev-password.md       # 개발자 비밀번호
│   └── dev-settings.json     # 개발자 설정 (자동 생성)
│
├── docs/                      # 문서
│
└── generated/                 # 생성된 파일 (자동 생성)
    ├── images/               # DALL-E 이미지
    ├── audio/                # TTS 오디오
    └── videos/               # 최종 영상
```

---

## API Tree 시스템

### 핵심 개념

**API Tree**는 여러 API 호출을 트리 구조로 연결하여 복잡한 작업을 자동화하는 시스템입니다.

#### 1. 노드 (Node)
- 각 노드는 하나의 API 호출을 담당
- GPT, DALL-E, TTS 등 다양한 API 타입 지원

#### 2. 부모-자식 참조
- 자식 노드는 부모 노드의 출력 배열을 참조하여 입력 생성
- 플레이스홀더를 통한 동적 값 삽입

#### 3. 병렬/순차 실행
- **같은 층 노드**: 병렬 처리 (Promise.all)
- **부모-자식 노드**: 순차 처리 (부모 완료 후 자식 실행)

#### 4. 동적 노드 생성
- 루트 노드 실행 후, 출력 배열 길이만큼 자동으로 자식 노드 생성
- 예: 8개 장면 → 24개 노드 (각 장면마다 자막, 이미지, 음성)

---

## 기술 스택

### Backend
- **Node.js** + **Express.js** - REST API 서버
- **OpenAI API** - GPT, DALL-E, TTS
- **FFmpeg** + **fluent-ffmpeg** - 영상 합성

### Frontend
- **Vanilla JavaScript** - 프론트엔드 로직
- **SVG** - 트리 시각화
- **Fetch API** - REST API 호출

---

## 실제 사용 통계

- **입력 텍스트**: 200-1000자
- **장면 수**: 8-12개 (동적 생성)
- **영상 길이**: 30-60초
- **영상 포맷**: 1080x1920 (9:16 Shorts)
- **실행 시간**: 약 10-15분 (일반 모드), 2-3분 (테스트 모드)
- **이미지 해상도**: 1024x1792 (DALL-E 3)
- **음성 품질**: TTS-1 (alloy voice)

---

## 제한사항 및 비용

### API 비용
- **DALL-E 3**: 이미지 1장당 약 $0.04-0.08
- **TTS-1**: 1,000자당 약 $0.015
- **GPT-4o**: 1M 토큰당 $2.50 (입력), $10.00 (출력)

### 제한사항
- 영상 길이: 최대 60초 권장
- 동시 실행: 서버 메모리에 따라 제한
- DALL-E 이미지 URL: 1시간 후 만료 (로컬 저장으로 해결)

---

## 다음 단계

- [시작하기](./02-getting-started.md) - 설치 및 첫 영상 생성
- [사용자 가이드](./03-user-guide.md) - 기능 상세 설명
- [개발자 가이드](./04-developer-guide.md) - 커스터마이징 방법

---

**프로젝트 시작일**: 2025-10-07
**프로젝트 상태**: ✅ Production Ready
